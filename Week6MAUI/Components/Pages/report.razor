@page "/Report" 

<h3 class="report-header">Expense Report</h3>


<style>
    .report-header {
        color: #2e7d32;
        font-size: 2rem;
        text-align: center;
        margin-bottom: 20px;
    }

    .date-filter, .action-buttons, .summary-chart {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 20px;
    }

    .input-date {
        border: 1px solid #4caf50;
        border-radius: 4px;
        padding: 5px;
    }

    .filter-btn {
        background-color: #4caf50;
        color: white;
    }

    .total-expense {
        text-align: center;
        background-color: #e8f5e9;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
    }

    .expense-amount {
        color: #2e7d32;
        font-weight: bold;
    }

    .expense-breakdown-header {
        color: #388e3c;
        text-align: center;
        margin-top: 20px;
        margin-bottom: 10px;
    }

    .expense-table {
        width: 100%;
        border-collapse: collapse;
        margin: 0 auto;
        background-color: #f1f8e9;
    }

        .expense-table th, .expense-table td {
            border: 1px solid #c8e6c9;
            padding: 8px;
            text-align: left;
        }

        .expense-table th {
            background-color: #a5d6a7;
            color: #2e7d32;
        }

    .btn {
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .btn-secondary {
        background-color: #81c784;
        color: white;
    }

    .btn-info {
        background-color: #64b5f6;
        color: white;
    }
</style>

<h3 class="report-header">Report</h3>
<div class="date-filter">
    <label for="start-date">From:</label>
    <input id="start-date" type="date" @bind="StartDate" class="input-date" />

    <label for="end-date">To:</label>
    <input id="end-date" type="date" @bind="EndDate" class="input-date" />

    <button class="btn btn-primary filter-btn" @onclick="ApplyFilter">Apply Filter</button>
</div>


<div class="action-buttons">
    <button class="btn btn-secondary" @onclick="ExportPdf">Export PDF</button>
    <button class="btn btn-secondary" @onclick="ExportCsv">Export CSV</button>
    <button class="btn btn-secondary" @onclick="ClearFilter">Clear Filter</button>
</div>


<div class="total-expense">
    <h4>Total Remaining Amount: <span class="expense-amount">@currencyType @TotalExpense.ToString()</span></h4>
</div>

<!-- Expense List -->
<h4 class="expense-breakdown-header">Transaction Breakdown</h4>
<table class="table expense-table">
    <thead>
        <tr>
            <th>Type</th>
            <th>Category</th>
            <th>Income Amount</th>
            <th>Debt Amount</th>
            <th>Expenses Amount</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var expense in FilteredExpenses)
        {
            <tr>
                <td>@expense.Type</td>
                <td>@expense.CategoryId</td>
                <td>@expense.IncomeAmount.ToString()</td>
                <td>@expense.DebtAmount.ToString()</td>
                <td>@expense.ExpensesAmount.ToString()</td>
                <td>@expense.Date.ToShortDateString()</td>
            </tr>
        }
        <tr>
            <td colspan="2"><strong>Total</strong></td>
            <td><strong>@totalIncomeAmount</strong></td>
            <td><strong>@totalDebtAmount</strong></td>
            <td><strong>@totalExpensesAmount</strong></td>
            <td></td>
        </tr>
    </tbody>
</table>

@* <div class="summary-chart">
    <button class="btn btn-info" @onclick="ViewSummaryChart">View Summary Chart</button>
</div>
 *@